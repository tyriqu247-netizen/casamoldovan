"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("intl-messageformat"),r=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n,o=t(e),a=t(r);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},u.apply(this,arguments)}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function s(e,r){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},s(e,r)}function c(e,r,t){return c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,r,t){var n=[null];n.push.apply(n,r);var o=new(Function.bind.apply(e,n));return t&&s(o,t.prototype),o},c.apply(null,arguments)}function l(e){var r="function"==typeof Map?new Map:void 0;return l=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return c(e,arguments,i(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),s(t,e)},l(e)}function f(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r.indexOf(t=a[n])>=0||(o[t]=e[t]);return o}exports.IntlErrorCode=void 0,(n=exports.IntlErrorCode||(exports.IntlErrorCode={})).MISSING_MESSAGE="MISSING_MESSAGE",n.MISSING_FORMAT="MISSING_FORMAT",n.ENVIRONMENT_FALLBACK="ENVIRONMENT_FALLBACK",n.INSUFFICIENT_PATH="INSUFFICIENT_PATH",n.INVALID_MESSAGE="INVALID_MESSAGE",n.INVALID_KEY="INVALID_KEY",n.FORMATTING_ERROR="FORMATTING_ERROR";var m=function(e){var r,t;function n(r,t){var n,o=r;return t&&(o+=": "+t),(n=e.call(this,o)||this).code=void 0,n.originalMessage=void 0,n.code=r,t&&(n.originalMessage=t),n}return t=e,(r=n).prototype=Object.create(t.prototype),r.prototype.constructor=r,s(r,t),n}(l(Error));function v(e,r){return e?Object.keys(e).reduce((function(t,n){return t[n]=u({timeZone:r},e[n]),t}),{}):e}function d(e){return[e.namespace,e.key].filter((function(e){return null!=e})).join(".")}function p(e){console.error(e)}function E(e,r,t){if(!e)throw new Error(void 0);var n=e;return r.split(".").forEach((function(e){var r=n[e];if(null==e||null==r)throw new Error(void 0);n=r})),n}function g(e){var r=e.messages,t=e.namespace,n=e.onError,o=void 0===n?p:n;try{if(!r)throw new Error(void 0);var a=t?E(r,t):r;if(!a)throw new Error(void 0);return a}catch(e){var u=new m(exports.IntlErrorCode.MISSING_MESSAGE,e.message);return o(u),u}}function I(e){var t=e.defaultTranslationValues,n=e.formats,a=e.getMessageFallback,i=void 0===a?d:a,s=e.locale,c=e.messageFormatCache,l=e.messagesOrError,f=e.namespace,p=e.onError,g=e.timeZone;function I(e,r,t){var n=new m(r,t);return p(n),i({error:n,key:e,namespace:f})}function y(e,a,d){if(l instanceof m)return i({error:l,key:e,namespace:f});var p,y=l;try{p=E(y,e)}catch(r){return I(e,exports.IntlErrorCode.MISSING_MESSAGE,r.message)}var w,M=[s,f,e,String(p)].filter((function(e){return null!=e})).join(".");if(null!=c&&c.has(M))w=c.get(M);else{if("object"==typeof p)return I(e,Array.isArray(p)?exports.IntlErrorCode.INVALID_MESSAGE:exports.IntlErrorCode.INSUFFICIENT_PATH,void 0);var h=function(e,r){if(!r){var t=e.replace(/'([{}])/gi,"$1");return/<|{/.test(t)?void 0:t}}(p,a);if(h)return h;try{w=new o.default(p,s,function(e,r){var t=r?u({},e,{dateTime:v(e.dateTime,r)}):e,n=o.default.formats.date,a=r?v(n,r):n,i=o.default.formats.time,s=r?v(i,r):i;return u({},t,{date:u({},a,null==t?void 0:t.dateTime),time:u({},s,null==t?void 0:t.dateTime)})}(u({},n,d),g))}catch(r){return I(e,exports.IntlErrorCode.INVALID_MESSAGE,r.message)}null==c||c.set(M,w)}try{var S=w.format(function(e){if(0!==Object.keys(e).length){var t={};return Object.keys(e).forEach((function(n){var o=0,a=e[n];t[n]="function"==typeof a?function(e){var t=a(e);return r.isValidElement(t)?r.cloneElement(t,{key:n+o++}):t}:a})),t}}(u({},t,a)));if(null==S)throw new Error(void 0);return r.isValidElement(S)||Array.isArray(S)||"string"==typeof S?S:String(S)}catch(r){return I(e,exports.IntlErrorCode.FORMATTING_ERROR,r.message)}}function w(e,r,t){var n=y(e,r,t);return"string"!=typeof n?I(e,exports.IntlErrorCode.INVALID_MESSAGE,void 0):n}return w.rich=y,w.raw=function(e){if(l instanceof m)return i({error:l,key:e,namespace:f});var r=l;try{return E(r,e)}catch(r){return I(e,exports.IntlErrorCode.MISSING_MESSAGE,r.message)}},w}function y(e,r){return e===r?void 0:e.slice((r+".").length)}var w=["getMessageFallback","messages","namespace","onError"],M=["getMessageFallback","messages","namespace","onError"],h=60,S=60*h,b=24*S,T=7*b,O=b*(365/12),F=3*O,N=365*b,A={second:1,seconds:1,minute:h,minutes:h,hour:S,hours:S,day:b,days:b,week:T,weeks:T,month:O,months:O,quarter:F,quarters:F,year:N,years:N};function R(e){var r=e.formats,t=e.locale,n=e.now,o=e.onError,a=void 0===o?p:o,i=e.timeZone;function s(e,r,t,n){var o;try{o=function(e,r){var t;if("string"==typeof r){if(!(t=null==e?void 0:e[r])){var n=new m(exports.IntlErrorCode.MISSING_FORMAT,void 0);throw a(n),n}}else t=r;return t}(t,r)}catch(r){return String(e)}try{return n(o)}catch(r){return a(new m(exports.IntlErrorCode.FORMATTING_ERROR,r.message)),String(e)}}return{dateTime:function(e,n){return s(e,n,null==r?void 0:r.dateTime,(function(r){var n;return null!=(n=r)&&n.timeZone||(i?r=u({},r,{timeZone:i}):a(new m(exports.IntlErrorCode.ENVIRONMENT_FALLBACK,void 0))),new Intl.DateTimeFormat(t,r).format(e)}))},number:function(e,n){return s(e,n,null==r?void 0:r.number,(function(r){return new Intl.NumberFormat(t,r).format(e)}))},relativeTime:function(e,r){try{var o=new Date(e),u=function(e){return e instanceof Date||"number"==typeof e?new Date(e):void 0!==(null==e?void 0:e.now)?new Date(e.now):n||(a(new m(exports.IntlErrorCode.ENVIRONMENT_FALLBACK,void 0)),new Date)}(r),i=(o.getTime()-u.getTime())/1e3,s="number"==typeof r||r instanceof Date||void 0===(null==r?void 0:r.unit)?function(e){var r=Math.abs(e);return r<h?"second":r<S?"minute":r<b?"hour":r<T?"day":r<O?"week":r<N?"month":"year"}(i):r.unit,c=function(e,r){return Math.round(e/A[r])}(i,s);return new Intl.RelativeTimeFormat(t,{numeric:"auto"}).format(c,s)}catch(r){return a(new m(exports.IntlErrorCode.FORMATTING_ERROR,r.message)),String(e)}},list:function(e,n){return s(e,n,null==r?void 0:r.list,(function(r){return new Intl.ListFormat(t,r).format(e)}))}}}function _(){var e=R.apply(void 0,arguments);return{formatDateTime:e.dateTime,formatNumber:e.number,formatRelativeTime:e.relativeTime}}var x=r.createContext(void 0),C=["getMessageFallback","messages","onError"];function k(e){var r=e.getMessageFallback,t=e.messages,n=e.onError;return u({},f(e,C),{messages:t,onError:n||p,getMessageFallback:r||d})}var G=["children"];function j(){var e=r.useContext(x);if(!e)throw new Error(void 0);return e}function L(){return new Date}var D=!1;exports.IntlError=m,exports.IntlProvider=function(e){var t=e.children,n=f(e,G),o=r.useState((function(){return new Map}))[0];return a.default.createElement(x.Provider,{value:u({},k(n),{messageFormatCache:o})},t)},exports.createFormatter=R,exports.createIntl=_,exports.createTranslator=function(e){var r=e.getMessageFallback,t=void 0===r?d:r,n=e.messages,o=e.namespace,a=e.onError,i=void 0===a?p:a;return function(e,r){var t=e.getMessageFallback,n=e.messages,o=e.namespace,a=e.onError,i=f(e,w);n=n["!"],o=y(o,"!");var s=I(u({},i,{onError:a,getMessageFallback:t,messagesOrError:g({messages:n,namespace:o,onError:a})})),c=s.rich;function l(){return s.apply(void 0,arguments)}return l.rich=function(e,r,n){var u=c(e,r,n);if("string"!=typeof u){var i=new m(exports.IntlErrorCode.FORMATTING_ERROR,void 0);return a(i),t({error:i,key:e,namespace:o})}return u},l.raw=s.raw,l}(u({},f(e,M),{onError:i,getMessageFallback:t,messages:{"!":n},namespace:o?"!."+o:"!"}))},exports.useFormatter=function(){var e=j(),t=e.formats,n=e.locale,o=e.now,a=e.onError,u=e.timeZone;return r.useMemo((function(){return R({formats:t,locale:n,now:o,onError:a,timeZone:u})}),[t,o,n,a,u])},exports.useIntl=function(){var e=j(),t=e.formats,n=e.locale,o=e.now,a=e.onError,u=e.timeZone;return D||(D=!0,console.warn("`useIntl()` is deprecated and will be removed in the next major version. Please switch to `useFormatter()`.")),r.useMemo((function(){return _({formats:t,locale:n,now:o,onError:a,timeZone:u})}),[t,o,n,a,u])},exports.useLocale=function(){return j().locale},exports.useMessages=function(){return j().messages},exports.useNow=function(e){var t=null==e?void 0:e.updateInterval,n=j().now,o=r.useState(n||L()),a=o[0],u=o[1];return r.useEffect((function(){if(t){var e=setInterval((function(){u(L())}),t);return function(){clearInterval(e)}}}),[n,t]),a},exports.useTimeZone=function(){return j().timeZone},exports.useTranslations=function(e){return function(e,t,n){var o=j(),a=o.defaultTranslationValues,u=o.formats,i=o.getMessageFallback,s=o.locale,c=o.messageFormatCache,l=o.onError,f=o.timeZone;e=e["!"],t=y(t,"!");var m=r.useMemo((function(){return g({messages:e,namespace:t,onError:l})}),[e,t,l]);return r.useMemo((function(){return I({messageFormatCache:c,getMessageFallback:i,messagesOrError:m,defaultTranslationValues:a,namespace:t,onError:l,formats:u,locale:s,timeZone:f})}),[c,i,m,a,t,l,u,s,f])}({"!":j().messages},e?"!."+e:"!")};
//# sourceMappingURL=use-intl.cjs.production.min.js.map
